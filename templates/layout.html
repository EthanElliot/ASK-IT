<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ask It</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='dist/css/output.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
    <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />
</head>

<body>
    <div class="relative min-h-screen flex">

        <!-- side nav -->
        <div
            class="bg-neutral-100 w-80 h-screen grid grid-rows-[3.4rem_auto_10rem] text-gray-700 border-r-2 sticky top-0">
            <div class="h-full flex my-auto items-center">
                <img class="w-8 my-auto h-8 ml-1 object-cover"
                    src="{{ url_for('static', filename='Brand_Assets/LOGO.png') }}">
                <p class="p-2 font-medium text-2xl text-center tracking-wide text-black">ASKIT</p>
            </div>

            <div>
                <ul class="w-full">
                    <li class="w-full hover:bg-white ">
                        <a class="w-full flex p-2 my-1 flex-1 align-middle  " href="/">
                            <span class="material-symbols-outlined">home</span>
                            <p class="m-auto">Home</p>
                        </a>
                    </li>
                    <li class="w-full hover:bg-white">
                        <a class="w-full flex p-2 my-1 align-middle flex-1" href="/u/{{current_user.id}}">
                            <span class="material-symbols-outlined">person</span>
                            <p class="m-auto">Account</p>
                        </a>
                    </li>
                    <li class="w-full hover:bg-white">
                        <a class="w-full flex p-2 my-1 flex-1 align-middle " href="/">
                            <span class="material-symbols-outlined">post_add</span>
                            <p class="m-auto">Ask</p>
                        </a>
                    </li>

                </ul>
                <div class="mx-2 border-b-2 h-0"></div>

            </div>
            {% if current_user.is_authenticated %}
            <div class="py-2 bottom-0">
                <div class="mx-2 border-b-2 h-0"></div>

                <ul class="w-full">
                    <li class="w-full hover:bg-white ">
                        <a class="w-full flex p-2 my-2 align-middle flex-1" href="">
                            <span class="material-symbols-outlined">settings</span>
                            <p class="m-auto">Settings</p>
                        </a>
                    </li>

                    <li class="w-full hover:bg-white">
                        <a class="w-full flex p-2 my-2 flex-1 align-middle" href="/logout">
                            <span class="material-symbols-outlined">logout</span>
                            <p class="m-auto">Logout</p>
                        </a>
                    </li>

                </ul>
            </div>
            {%else%}
            <div class="py-2 bottom-0">
                <div class="mx-2 border-b-2 h-0"></div>
                <div class="flex flex-col items-center">
                    <p class="mt-2 mx-2 mb-4 text-sm text-neutral-500">
                        Create an account to start asking your hardest questions!
                    </p>
                    <button class="p-2 bg-blue-950 text-white w-3/4 font-semibold"
                        onclick="location.href='/signup'">Join</button>
                </div>

            </div>
            {%endif%}


        </div>

        <!-- right -->
        <div class="w-full">
            <!-- top nav -->
            <div
                class="h-14 top-0 sticky border-b-2 grid {% if current_user.is_authenticated %} grid-cols-[auto_3.5rem_15rem] {%else%} grid-cols-[auto_15rem] {%endif%} text-gray-400 text-base">
                <form class="w-full h-full border-r-2 flex items-center">
                    <span class="material-symbols-outlined absolute ml-2 ">search</span>
                    <input type="text" name="" id="" class="w-full h-full pl-10 focus:outline-0 ">
                </form>
                {% if current_user.is_authenticated %}
                <button class="border-r-2 flex justify-center items-center">
                    <span class="material-symbols-outlined">add</span>
                </button>
                <button id="user_dropdown_btn" class="w-auto flex items-center mx-2" onclick="Dropdown_Function()">
                    <img class="rounded-full w-8 mr-2" src="{{ url_for('static', filename='default_profile.svg') }}">
                    </img>
                    <p class=" text-black">{{current_user.username}}</p>
                    <span class="material-symbols-sharp ml-auto">
                        arrow_drop_down
                    </span>
                </button>
                <!-- USER DROPDOWN -->
                <div id="User_dropdown"
                    class="z-10 absolute top-14 w-[14rem] h-auto bg-neutral-100 right-2 hidden border-x-2 border-b-2">
                    <ul class="mt-2 mb-4">
                        <li class="mx-2 mb-2">
                            <p class="text-sm">Signed in as</p>
                            <p class="">{{current_user.email}}</p>
                        </li>

                        <div class="mx-2 border-b-2 h-0"></div>
                        <li class="hover:bg-white">
                            <a class="w-full flex p-2 my-2 align-middle flex-1" href="/">
                                <span class="material-symbols-outlined">post_add</span>
                                <p class="m-auto">Ask</p>
                            </a>
                        </li>
                        <li class="hover:bg-white">
                            <a class="w-full flex p-2 my-2 align-middle flex-1" href="/u/{{current_user.id}}">
                                <span class="material-symbols-outlined">person</span>
                                <p class="m-auto">Account</p>
                            </a>
                        </li>

                        <li class="hover:bg-white">
                            <a class="w-full flex p-2 my-2 flex-1 align-middle" href="/logout">
                                <span class="material-symbols-outlined">logout</span>
                                <p class="m-auto">Logout</p>
                            </a>
                        </li>
                    </ul>


                </div>
                {%else%}

                <button class="flex items-center justify-center" onclick="location.href='/signin'">
                    <span class="material-symbols-outlined mr-2">
                        login
                    </span>
                    <p>sign in</p>
                </button>
                {%endif%}
            </div>

            <div class="h-auto w-auto max-w-7xl mx-auto">
                {% block content %}
                {% endblock %}
            </div>




        </div>


    </div>


</body>

<script>
    /* When the user clicks on the button, 
    toggle between hiding and showing the dropdown content */
    function Dropdown_Function() {

        $("#User_dropdown").toggleClass("hidden")
        console.log("clicked")
    }

    // Close the dropdown if the user clicks outside of it
    $(document).click(function (e) {
        if (!e.target.matches('#user_dropdown_btn')) {
            $("#User_dropdown").addClass('hidden');
        }
    })
</script>

</html>